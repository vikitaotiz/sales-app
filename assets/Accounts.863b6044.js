import{Q as r,a as z}from"./QTr.154b384c.js";import{r as u,aI as p,a5 as A,u as d,P as s,a3 as h,bb as t,b as I,d as a,ac as c,bV as x,bY as _,a6 as C,a4 as S}from"./index.29739106.js";import{Q as w}from"./QInput.0db28501.js";import{Q as L,a as O,p as P,c as R,d as Y}from"./paginations.52192600.js";import{a as j,Q}from"./QCard.b052ba04.js";import{u as F}from"./use-quasar.85c6fbda.js";import{a as G,u as H}from"./index.1f244ee4.js";import{u as J}from"./account-store.f6b0fff8.js";import"./use-dark.b013d156.js";import"./QList.1a5a573c.js";import"./module_calls.421761b7.js";import"./helpers.73a7253f.js";const K=[{name:"production_cost",required:!0,label:"Expense",align:"left",field:n=>n.production_cost,format:n=>`${n}`,sortable:!0},{name:"total_sales",required:!0,label:"Expected Sales",align:"left",field:n=>n.total_sales,format:n=>`${n}`,sortable:!0},{name:"expected_cash",align:"center",label:"Expected Cash",field:"expected_cash",sortable:!0},{name:"expected_mpesa",align:"center",label:"Expected Mpesa",field:"expected_mpesa",sortable:!0},{name:"actual_cash",align:"center",label:"Actual Cash",field:"actual_cash",sortable:!0},{name:"actual_mpesa",align:"center",label:"Actual Mpesa",field:"actual_mpesa",sortable:!0},{name:"user",align:"center",label:"Created By",field:"user",sortable:!0},{name:"created_at",align:"center",label:"Created On",field:"created_at",sortable:!0},{name:"actions",align:"center",label:"Actions",field:"created_at"}];const W={class:"q-pa-md"},X={key:0},Z={key:1},ee={class:"text-h6"},ae={class:"text-center error_msg"},_e={__name:"Accounts",setup(n){F(),G();const V=J(),y=P(10),m=u(!1),f=u(!1),g=u(""),k=u(""),i=u(1),v=u(1),E=u(""),b=u(""),{data:N,isLoading:B,isError:q}=H("accounts",()=>V.fetchAccounts()),U=()=>{k.value="Add New Account",m.value=!0,f.value=!1},$=o=>{f.value=!0,k.value=`Edit ${o.name}`,account_name.value=o.name,E.value=o.uuid,m.value=!0},D=async()=>{b.value="";const o={actual_cash:Number(i.value),actual_mpesa:Number(v.value)};if(o.actual_cash&&o.actual_mpesa){const l=await V.createAccount(o);console.log(l)}else b.value="Name is required!",notifyUser("Name is required!","red","top-right")},M=()=>{m.value=!1,i.value=1,v.value=1,E.value="",b.value=""};return(o,l)=>(p(),A("div",W,[d(B)?(p(),A("div",X,"Loading accounts...")):d(q)?(p(),A("div",Z,"An error has occurred: "+s(d(q)),1)):(p(),h(L,{key:2,title:"Accounts",rows:d(N),columns:d(K),pagination:d(y),"onUpdate:pagination":l[2]||(l[2]=e=>I(y)?y.value=e:null),separator:"cell","row-key":"name",filter:g.value,dense:""},{body:t(e=>[a(z,{props:e},{default:t(()=>[a(r,{key:"production_cost",props:e},{default:t(()=>[c(s(e.row.production_cost),1)]),_:2},1032,["props"]),a(r,{key:"total_sales",props:e},{default:t(()=>[c(s(e.row.total_sales),1)]),_:2},1032,["props"]),a(r,{key:"expected_cash",props:e},{default:t(()=>[c(s(e.row.expected_cash),1)]),_:2},1032,["props"]),a(r,{key:"expected_mpesa",props:e},{default:t(()=>[c(s(e.row.expected_mpesa),1)]),_:2},1032,["props"]),a(r,{key:"actual_cash",props:e},{default:t(()=>[c(s(e.row.actual_cash),1)]),_:2},1032,["props"]),a(r,{key:"actual_mpesa",props:e},{default:t(()=>[c(s(e.row.actual_mpesa),1)]),_:2},1032,["props"]),a(r,{key:"user",props:e},{default:t(()=>[c(s(e.row.user),1)]),_:2},1032,["props"]),a(r,{key:"created_at",props:e},{default:t(()=>[c(s(e.row.created_at),1)]),_:2},1032,["props"]),a(r,{key:"actions",props:e},{default:t(()=>[a(x,{color:"blue",name:"edit",onClick:T=>$(e.row),style:{cursor:"pointer"},size:"20px",class:"q-mr-md"},null,8,["onClick"]),a(x,{color:"red",name:"delete",onClick:T=>o.deleteAccount(e.row),style:{cursor:"pointer"},size:"20px"},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),"top-right":t(()=>[a(w,{borderless:"",dense:"",outlined:"",rounded:"",debounce:"300",modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=e=>g.value=e),placeholder:"Search",class:"q-mr-md"},{append:t(()=>[a(x,{name:"search"})]),_:1},8,["modelValue"]),a(_,{onClick:U,round:"",dense:"",color:"primary",size:"small",icon:"add"}),a(_,{dense:"",flat:"",color:"primary","icon-right":"archive",label:"Export",class:"q-ml-sm","no-caps":"",onClick:l[1]||(l[1]=e=>o.exportExcel(d(N)))})]),_:1},8,["rows","columns","pagination","filter"])),a(O,{modelValue:m.value,"onUpdate:modelValue":l[5]||(l[5]=e=>m.value=e),persistent:""},{default:t(()=>[a(j,{style:{width:"500px"}},{default:t(()=>[a(Q,null,{default:t(()=>[C("div",ee,s(k.value),1)]),_:1}),a(Q,{class:"q-pt-none"},{default:t(()=>[a(w,{outlined:"",dense:"",label:"Actual Cash",modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=e=>i.value=e),type:"number"},null,8,["modelValue"])]),_:1}),a(Q,{class:"q-pt-none"},{default:t(()=>[a(w,{outlined:"",dense:"",label:"Actual Mpesa",modelValue:v.value,"onUpdate:modelValue":l[4]||(l[4]=e=>v.value=e),type:"number"},null,8,["modelValue"])]),_:1}),C("div",ae,[C("small",null,s(b.value),1)]),a(R,{align:"right"},{default:t(()=>[a(_,{flat:"",label:"Cancel",color:"red",onClick:M}),a(Y),i.value&&!f.value?(p(),h(_,{key:0,flat:"",label:"Add Account",color:"primary",onClick:D})):S("",!0),i.value&&f.value?(p(),h(_,{key:1,flat:"",label:"Edit Account",color:"primary",onClick:o.editSelectedAccount},null,8,["onClick"])):S("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{_e as default};
