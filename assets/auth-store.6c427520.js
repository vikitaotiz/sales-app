import{c8 as n,c9 as i}from"./index.4cc15ae0.js";import{b as o}from"./helpers.73a7253f.js";const r=async(s,e)=>(await fetch(`${o}/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json(),c=async(s,e)=>(await fetch(`${o}/${s}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}})).json(),h=n("auth",{state:()=>({user:i()}),actions:{saveUser(s){localStorage.setItem("auth_user",JSON.stringify(s))},removeUser(){localStorage.removeItem("auth_user")},async login(s){const e=await r(s,"login");return this.saveUser(e),this.user=e,e},async register(s){const e=await r(s,"register");return this.saveUser(e),this.user=e,e},async logout(){var s,e;if((s=this.user)!=null&&s.token){this.user=null;const t=await c("logout",(e=this.user)==null?void 0:e.token);if(this.removeUser(),t.status==="success")return t;window.location.reload(!0)}else alert("Logout. There was an error")}}});export{h as u};
